<section class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h3 class="mb-0 text-center">{{ tipo }} Vacante</h3>
        </div>
        <div class="card-body">
          <form [formGroup]="vacanteForm" (ngSubmit)="getDataForm()">
            <!-- Nombre -->
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" id="nombre" class="form-control" 
                     formControlName="nombre"
                     [class.is-invalid]="vacanteForm.get('nombre')?.invalid && vacanteForm.get('nombre')?.touched">
              
              @if (vacanteForm.get('nombre')?.invalid && vacanteForm.get('nombre')?.touched) {
                <div class="invalid-feedback">
                  @if (vacanteForm.get('nombre')?.errors?.['required']) {
                    <span>Campo requerido</span>
                  }
                  @if (vacanteForm.get('nombre')?.errors?.['minlength']) {
                    <span>Mínimo 2 caracteres</span>
                  }
                </div>
              }
            </div>

            <!-- Descripción -->
            <div class="mb-3">
              <label for="descripcion" class="form-label">Descripción</label>
              <textarea id="descripcion" rows="3" class="form-control" 
                        formControlName="descripcion"
                        [class.is-invalid]="vacanteForm.get('descripcion')?.invalid && vacanteForm.get('descripcion')?.touched"></textarea>
              
              @if (vacanteForm.get('descripcion')?.invalid && vacanteForm.get('descripcion')?.touched) {
                <div class="invalid-feedback">
                  @if (vacanteForm.get('descripcion')?.errors?.['required']) {
                    <span>Campo requerido</span>
                  }
                  @if (vacanteForm.get('descripcion')?.errors?.['minlength']) {
                    <span>Mínimo 10 caracteres</span>
                  }
                </div>
              }
            </div>

            <!-- Fecha -->
            <div class="mb-3">
              <label for="fecha" class="form-label">Fecha</label>
              <input type="date" id="fecha" class="form-control" 
                     formControlName="fecha"
                     [class.is-invalid]="vacanteForm.get('fecha')?.invalid && vacanteForm.get('fecha')?.touched">
              
              @if (vacanteForm.get('fecha')?.invalid && vacanteForm.get('fecha')?.touched) {
                <div class="invalid-feedback">
                  Campo requerido
                </div>
              }
            </div>

            <!-- Salario -->
            <div class="mb-3">
              <label for="salario" class="form-label">Salario</label>
              <input type="number" id="salario" class="form-control" 
                     formControlName="salario"
                     [class.is-invalid]="vacanteForm.get('salario')?.invalid && vacanteForm.get('salario')?.touched">
              
              @if (vacanteForm.get('salario')?.invalid && vacanteForm.get('salario')?.touched) {
                <div class="invalid-feedback">
                  @if (vacanteForm.get('salario')?.errors?.['required']) {
                    <span>Campo requerido</span>
                  }
                  @if (vacanteForm.get('salario')?.errors?.['min']) {
                    <span>El valor mínimo es 0</span>
                  }
                </div>
              }
            </div>

            <!-- Estatus -->
            <div class="mb-3">
              <label for="estatus" class="form-label">Estatus</label>
              <select id="estatus" class="form-select" 
                      formControlName="estatus"
                      [class.is-invalid]="vacanteForm.get('estatus')?.invalid && vacanteForm.get('estatus')?.touched">
                <option value="">Seleccione...</option>
                <option value="CREADA">Creada</option>
                <option value="CUBIERTA">Cubierta</option>
                <option value="CANCELADA">Cancelada</option>
              </select>
              
              @if (vacanteForm.get('estatus')?.invalid && vacanteForm.get('estatus')?.touched) {
                <div class="invalid-feedback">
                  Seleccione un estatus válido
                </div>
              }
            </div>

            <!-- Destacado -->
            <div class="mb-3 form-check">
              <input type="checkbox" id="destacado" class="form-check-input" 
                     formControlName="destacado">
              <label for="destacado" class="form-check-label">Vacante destacada</label>
            </div>

            <!-- Imagen -->
            <div class="mb-3">
              <label for="imagen" class="form-label">Imagen (URL)</label>
              <input type="text" id="imagen" class="form-control" 
                     formControlName="imagen"
                     [class.is-invalid]="vacanteForm.get('imagen')?.invalid && vacanteForm.get('imagen')?.touched">
              
              @if (vacanteForm.get('imagen')?.invalid && vacanteForm.get('imagen')?.touched) {
                <div class="invalid-feedback">
                  Campo requerido
                </div>
              }
            </div>

            <!-- Detalles -->
            <div class="mb-3">
              <label for="detalles" class="form-label">Detalles</label>
              <textarea id="detalles" rows="3" class="form-control" 
                        formControlName="detalles"
                        [class.is-invalid]="vacanteForm.get('detalles')?.invalid && vacanteForm.get('detalles')?.touched"></textarea>
              
              @if (vacanteForm.get('detalles')?.invalid && vacanteForm.get('detalles')?.touched) {
                <div class="invalid-feedback">
                  @if (vacanteForm.get('detalles')?.errors?.['required']) {
                    <span>Campo requerido</span>
                  }
                  @if (vacanteForm.get('detalles')?.errors?.['minlength']) {
                    <span>Mínimo 10 caracteres</span>
                  }
                </div>
              }
            </div>

            <!-- Categoría -->
            <div class="mb-3">
              <label for="categoria" class="form-label">Categoría</label>
              <select id="categoria" class="form-select" 
                      formControlName="categoria"
                      [class.is-invalid]="vacanteForm.get('categoria')?.invalid && vacanteForm.get('categoria')?.touched">
                <option value="">Seleccione...</option>
                @for (cat of categorias; track cat.idCategoria) {
                  <option [value]="cat.idCategoria">{{ cat.nombre }}</option>
                }
              </select>
              
              @if (vacanteForm.get('categoria')?.invalid && vacanteForm.get('categoria')?.touched) {
                <div class="invalid-feedback">
                  Seleccione una categoría
                </div>
              }
            </div>

            <!-- Empresa -->
            <div class="mb-3">
              <label for="empresa" class="form-label">Empresa</label>
              <select id="empresa" class="form-select" 
                      formControlName="empresa"
                      [class.is-invalid]="vacanteForm.get('empresa')?.invalid && vacanteForm.get('empresa')?.touched">
                <option value="">Seleccione...</option>
                @for (emp of empresas; track emp.idEmpresa) {
                  <option [value]="emp.idEmpresa">{{ emp.nombreEmpresa }}</option>
                }
              </select>
              
              @if (vacanteForm.get('empresa')?.invalid && vacanteForm.get('empresa')?.touched) {
                <div class="invalid-feedback">
                  Seleccione una empresa
                </div>
              }
            </div>

            <!-- Botones -->
            <div class="d-flex justify-content-end gap-2 mt-4">
              <button type="button" class="btn btn-secondary" routerLink="/vacantes">
                Cancelar
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="vacanteForm.invalid">
                @if (tipo === 'Nuevo') {
                  Crear Vacante
                } @else {
                  Actualizar Vacante
                }
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>